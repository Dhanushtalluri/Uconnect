<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Upload Weekly Challenge - Practical Knowledge Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Bootstrap 5 CSS CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f8faff;
      color: #1a237e;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      min-height: 100vh;
      padding: 2rem 1rem;
    }
    h1, h2 {
      font-weight: 700;
      margin-bottom: 1.5rem;
      text-align: center;
    }
    form {
      max-width: 700px;
      margin: 0 auto 2rem;
      background: white;
      padding: 2rem;
      border-radius: 0.75rem;
      box-shadow: 0 4px 12px rgba(26, 35, 126, 0.1);
    }
    .alert {
      max-width: 700px;
      margin: 0 auto 1rem;
      display: none;
    }
  </style>
</head>
<body>

  <main>
    <h1>Upload Weekly Challenge</h1>

    <form id="challengeForm" novalidate>
      <div class="mb-3">
        <label for="title" class="form-label">Challenge Title *</label>
        <input type="text" class="form-control" id="title" placeholder="Enter challenge title" required />
      </div>
      <div class="mb-3">
        <label for="description" class="form-label">Description *</label>
        <textarea class="form-control" id="description" rows="4" placeholder="Describe the challenge" required></textarea>
      </div>
      <div class="mb-3">
        <label for="deadline" class="form-label">Deadline *</label>
        <input type="date" class="form-control" id="deadline" required />
      </div>
      <button type="submit" class="btn btn-primary w-100">Submit Challenge</button>
    </form>

    <div id="formAlert" class="alert alert-success text-center"></div>
  </main>

  <!-- Firebase JS SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.21.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.21.0/firebase-firestore-compat.js"></script>

  <script>
    // Replace with your Firebase project credentials
   // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyBjiKldk4Q-J8dEbhBd6FTGyPb-TQoGadE",
  authDomain: "st-fees.firebaseapp.com",
  projectId: "st-fees",
  storageBucket: "st-fees.firebasestorage.app",
  messagingSenderId: "865723388538",
  appId: "1:865723388538:web:e49e6bde9ff7023aae61c3",
  measurementId: "G-Y9WQXHKTX4"
};
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const form = document.getElementById('challengeForm');
    const alertBox = document.getElementById('formAlert');

    function showAlert(message, type = 'success') {
      alertBox.textContent = message;
      alertBox.className = `alert alert-${type} text-center`;
      alertBox.style.display = 'block';
      setTimeout(() => {
        alertBox.style.display = 'none';
      }, 4000);
    }

    form.addEventListener('submit', e => {
      e.preventDefault();

      const title = form.title.value.trim();
      const description = form.description.value.trim();
      const deadline = form.deadline.value;

      if (!title || !description || !deadline) {
        showAlert('Please fill in all fields.', 'danger');
        return;
      }

      db.collection('weeklyChallenges').add({
        title,
        description,
        deadline,
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      }).then(() => {
        showAlert('Challenge successfully uploaded!');
        form.reset();
      }).catch(error => {
        console.error('Error adding challenge:', error);
        showAlert('Failed to upload challenge. Try again later.', 'danger');
      });
    });
  </script>

  <!-- Bootstrap 5 JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
